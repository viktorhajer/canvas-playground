(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{zsk6:function(l,n,u){"use strict";u.r(n);var t=u("CcnG"),e=function(){return function(){}}(),a=u("t68o"),i=u("zbXB"),s=u("NcP4"),o=u("xYTU"),r=u("pMnS"),c=u("FIYE"),b=u("gIcY"),h=u("Ip0R"),d=u("3mea"),g=function(){function l(l){this.streamService=l,this.enabled=!1,this.minSpeed=80,this.trackerSize=40,this.trackerSpeed=4,this.colorToTrack="#EFD0CF",this.colorTolerance=[.2,1,1],this.hsvColor=[],this.streamService.streams.length&&(this.streamToDisplay=this.streamService.streams[0]),this.setColorToTrack(this.rgbToHsv(this.hex2rgb(this.colorToTrack)))}return l.prototype.ngOnInit=function(){this.toggleEnabled()},l.prototype.toggleEnabled=function(){this.enabled=!this.enabled,this.enabled&&this.start()},l.prototype.start=function(){this.video=document.createElement("video"),this.video.srcObject=this.streamToDisplay,this.video.width=640,this.video.height=480,this.video.autoplay=!0,this.canvasBlended=document.createElement("canvas"),this.canvasBlended.width=this.video.width,this.canvasBlended.height=this.video.height,this.ctxBlended=this.canvasBlended.getContext("2d"),this.canvas=document.getElementById("canvas"),this.ctx=this.canvas.getContext("2d"),this.update()},l.prototype.update=function(){var l=this;this.ctx.drawImage(this.video,0,0,this.video.width,this.video.height),this.computeFrame(),this.enabled&&setTimeout(function(){return l.update()},1)},l.prototype.computeFrame=function(){var l,n,u,t=this.ctx.getImageData(0,0,this.video.width,this.video.height);this.blend(t),this.ctx.strokeStyle="black",this.ctx.lineWidth=2;for(var e=t.data.length/4,a=0;a<e;a+=4)if(u=4*a,l=a%t.width,n=Math.round(a/t.width),this.isObjectColor(t,this.frameBlended,u)){this.objectShape={x:l,y:n};break}this.objectShape&&!this.actualShape?this.actualShape=this.objectShape:this.objectShape&&this.actualShape&&(this.actualShape.x+=(this.objectShape.x-this.actualShape.x)/this.trackerSpeed,this.actualShape.y+=(this.objectShape.y-this.actualShape.y)/this.trackerSpeed),this.actualShape&&this.ctx.strokeRect(this.actualShape.x-this.trackerSize/2,this.actualShape.y-this.trackerSize/2,this.trackerSize,this.trackerSize)},l.prototype.blend=function(l){this.lastImageData||(this.lastImageData=l);var n=this.ctx.createImageData(this.video.width,this.video.height);this.createBlendedMask(n.data,l.data,this.lastImageData.data),this.ctxBlended.putImageData(n,0,0),this.frameBlended=this.ctxBlended.getImageData(0,0,this.video.width,this.video.height),this.lastImageData=l},l.prototype.createBlendedMask=function(l,n,u){if(n.length!=u.length)return null;for(var t=0;t<.25*n.length;){var e=Math.abs((n[4*t]+n[4*t+1]+n[4*t+2])/3-(u[4*t]+u[4*t+1]+u[4*t+2])/3)>this.minSpeed?255:0;l[4*t]=e,l[4*t+1]=e,l[4*t+2]=e,l[4*t+3]=255,++t}},l.prototype.isObjectColor=function(l,n,u){var t=l.data,e=n.data;if((e[u+0]+e[u+1]+e[u+2])/3<255)return!1;for(var a=u-4;a<=u+4;a+=4){var i=this.rgbToHsv([t[a+0],t[a+1],t[a+2]]);if(i[0]<this.hsvColor[0]-this.colorTolerance[0]/2||i[0]>this.hsvColor[0]+this.colorTolerance[0]/2||i[1]<this.hsvColor[1]-this.colorTolerance[1]/2||i[1]>this.hsvColor[1]+this.colorTolerance[1]/2||i[2]<this.hsvColor[2]-this.colorTolerance[2]/2||i[2]>this.hsvColor[2]+this.colorTolerance[2]/2)return!1}return!0},l.prototype.setColorToTrack=function(l){this.hsvColor=l},l.prototype.rgbToHsv=function(l){var n,u,t=l[0]/255,e=l[1]/255,a=l[2]/255,i=Math.max(t,e,a),s=Math.min(t,e,a),o=i,r=i-s;if(u=0===i?0:r/i,i===s)n=0;else{switch(i){case t:n=(e-a)/r+(e<a?6:0);break;case e:n=(a-t)/r+2;break;case a:n=(t-e)/r+4}n/=6}return[n,u,o]},l.prototype.hex2rgb=function(l){var n,u,t;return"#"==l.charAt(0)&&(l=l.substr(1)),n=l.charAt(0)+l.charAt(1),u=l.charAt(2)+l.charAt(3),t=l.charAt(4)+l.charAt(5),[n=parseInt(n,16),u=parseInt(u,16),t=parseInt(t,16)]},l.prototype.rgb2hex=function(l,n,u){var t=Array.apply(null,arguments).join().match(/\d+/g);return((t[0]<<16)+(t[1]<<8)+ +t[2]).toString(16)},l.prototype.pickColor=function(l){var n=this.ctx.getImageData(0,0,this.video.width,this.video.height).data,u=this.video.width*l.layerY+l.layerX,t=n[4*u+0],e=n[4*u+1],a=n[4*u+2];this.colorToTrack="#"+this.rgb2hex(t,e,a),this.setColorToTrack(this.rgbToHsv([t,e,a]))},l}(),p=t.qb({encapsulation:0,styles:[[".filter-button[_ngcontent-%COMP%]{width:45px;height:35px}"],c.a],data:{}});function v(l){return t.Lb(0,[(l()(),t.sb(0,0,null,null,1,"p",[["class","module-message panel"]],null,null,null,null,null)),(l()(),t.Jb(-1,null,["Select media stream"]))],null,null)}function m(l){return t.Lb(0,[(l()(),t.sb(0,0,null,null,2,"a",[["class","filter-button extra"]],null,[[null,"click"]],function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.toggleEnabled()&&t),t},null,null)),(l()(),t.sb(1,0,null,null,1,"label",[],null,null,null,null,null)),(l()(),t.Jb(-1,null,["Start"]))],null,null)}function C(l){return t.Lb(0,[(l()(),t.sb(0,0,null,null,2,"a",[["class","filter-button enabled extra"]],null,[[null,"click"]],function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.toggleEnabled()&&t),t},null,null)),(l()(),t.sb(1,0,null,null,1,"label",[],null,null,null,null,null)),(l()(),t.Jb(-1,null,["Stop"]))],null,null)}function f(l){return t.Lb(0,[(l()(),t.sb(0,0,null,null,47,"div",[["class","settings panel"]],null,null,null,null,null)),(l()(),t.sb(1,0,null,null,46,"div",[["class","settings-container"]],null,null,null,null,null)),(l()(),t.sb(2,0,null,null,13,"div",[["class","form-field"]],null,null,null,null,null)),(l()(),t.sb(3,0,null,null,2,"div",[["class","name"]],null,null,null,null,null)),(l()(),t.sb(4,0,null,null,1,"label",[],null,null,null,null,null)),(l()(),t.Jb(-1,null,["Tracker speed: "])),(l()(),t.sb(6,0,null,null,9,"div",[["class","range-input"]],null,null,null,null,null)),(l()(),t.sb(7,0,null,null,6,"input",[["type","range"]],[[8,"min",0],[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(l,n,u){var e=!0,a=l.component;return"input"===n&&(e=!1!==t.Cb(l,8)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Cb(l,8).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Cb(l,8)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Cb(l,8)._compositionEnd(u.target.value)&&e),"change"===n&&(e=!1!==t.Cb(l,9).onChange(u.target.value)&&e),"input"===n&&(e=!1!==t.Cb(l,9).onChange(u.target.value)&&e),"blur"===n&&(e=!1!==t.Cb(l,9).onTouched()&&e),"ngModelChange"===n&&(e=!1!==(a.trackerSpeed=u)&&e),e},null,null)),t.rb(8,16384,null,0,b.b,[t.G,t.k,[2,b.a]],null,null),t.rb(9,16384,null,0,b.m,[t.G,t.k],null,null),t.Gb(1024,null,b.e,function(l,n){return[l,n]},[b.b,b.m]),t.rb(11,671744,null,0,b.h,[[8,null],[8,null],[8,null],[6,b.e]],{model:[0,"model"]},{update:"ngModelChange"}),t.Gb(2048,null,b.f,null,[b.h]),t.rb(13,16384,null,0,b.g,[[4,b.f]],null,null),(l()(),t.sb(14,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t.Jb(15,null,["(value: ",")"])),(l()(),t.sb(16,0,null,null,13,"div",[["class","form-field"]],null,null,null,null,null)),(l()(),t.sb(17,0,null,null,2,"div",[["class","name"]],null,null,null,null,null)),(l()(),t.sb(18,0,null,null,1,"label",[],null,null,null,null,null)),(l()(),t.Jb(-1,null,["Tracker size: "])),(l()(),t.sb(20,0,null,null,9,"div",[["class","range-input"]],null,null,null,null,null)),(l()(),t.sb(21,0,null,null,6,"input",[["type","range"]],[[8,"min",0],[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(l,n,u){var e=!0,a=l.component;return"input"===n&&(e=!1!==t.Cb(l,22)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Cb(l,22).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Cb(l,22)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Cb(l,22)._compositionEnd(u.target.value)&&e),"change"===n&&(e=!1!==t.Cb(l,23).onChange(u.target.value)&&e),"input"===n&&(e=!1!==t.Cb(l,23).onChange(u.target.value)&&e),"blur"===n&&(e=!1!==t.Cb(l,23).onTouched()&&e),"ngModelChange"===n&&(e=!1!==(a.trackerSize=u)&&e),e},null,null)),t.rb(22,16384,null,0,b.b,[t.G,t.k,[2,b.a]],null,null),t.rb(23,16384,null,0,b.m,[t.G,t.k],null,null),t.Gb(1024,null,b.e,function(l,n){return[l,n]},[b.b,b.m]),t.rb(25,671744,null,0,b.h,[[8,null],[8,null],[8,null],[6,b.e]],{model:[0,"model"]},{update:"ngModelChange"}),t.Gb(2048,null,b.f,null,[b.h]),t.rb(27,16384,null,0,b.g,[[4,b.f]],null,null),(l()(),t.sb(28,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t.Jb(29,null,["(value: ",")"])),(l()(),t.sb(30,0,null,null,13,"div",[["class","form-field"]],null,null,null,null,null)),(l()(),t.sb(31,0,null,null,2,"div",[["class","name"]],null,null,null,null,null)),(l()(),t.sb(32,0,null,null,1,"label",[],null,null,null,null,null)),(l()(),t.Jb(-1,null,["Move speed: "])),(l()(),t.sb(34,0,null,null,9,"div",[["class","range-input"]],null,null,null,null,null)),(l()(),t.sb(35,0,null,null,6,"input",[["type","range"]],[[8,"min",0],[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(l,n,u){var e=!0,a=l.component;return"input"===n&&(e=!1!==t.Cb(l,36)._handleInput(u.target.value)&&e),"blur"===n&&(e=!1!==t.Cb(l,36).onTouched()&&e),"compositionstart"===n&&(e=!1!==t.Cb(l,36)._compositionStart()&&e),"compositionend"===n&&(e=!1!==t.Cb(l,36)._compositionEnd(u.target.value)&&e),"change"===n&&(e=!1!==t.Cb(l,37).onChange(u.target.value)&&e),"input"===n&&(e=!1!==t.Cb(l,37).onChange(u.target.value)&&e),"blur"===n&&(e=!1!==t.Cb(l,37).onTouched()&&e),"ngModelChange"===n&&(e=!1!==(a.minSpeed=u)&&e),e},null,null)),t.rb(36,16384,null,0,b.b,[t.G,t.k,[2,b.a]],null,null),t.rb(37,16384,null,0,b.m,[t.G,t.k],null,null),t.Gb(1024,null,b.e,function(l,n){return[l,n]},[b.b,b.m]),t.rb(39,671744,null,0,b.h,[[8,null],[8,null],[8,null],[6,b.e]],{model:[0,"model"]},{update:"ngModelChange"}),t.Gb(2048,null,b.f,null,[b.h]),t.rb(41,16384,null,0,b.g,[[4,b.f]],null,null),(l()(),t.sb(42,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t.Jb(43,null,["(value: ",")"])),(l()(),t.sb(44,0,null,null,3,"div",[["class","form-field"]],null,null,null,null,null)),(l()(),t.sb(45,0,null,null,2,"div",[["class","name"]],null,null,null,null,null)),(l()(),t.sb(46,0,null,null,1,"label",[],null,null,null,null,null)),(l()(),t.Jb(47,null,["Color: ",""]))],function(l,n){var u=n.component;l(n,11,0,u.trackerSpeed),l(n,25,0,u.trackerSize),l(n,39,0,u.minSpeed)},function(l,n){var u=n.component;l(n,7,0,1,20,t.Cb(n,13).ngClassUntouched,t.Cb(n,13).ngClassTouched,t.Cb(n,13).ngClassPristine,t.Cb(n,13).ngClassDirty,t.Cb(n,13).ngClassValid,t.Cb(n,13).ngClassInvalid,t.Cb(n,13).ngClassPending),l(n,15,0,u.trackerSpeed),l(n,21,0,10,100,t.Cb(n,27).ngClassUntouched,t.Cb(n,27).ngClassTouched,t.Cb(n,27).ngClassPristine,t.Cb(n,27).ngClassDirty,t.Cb(n,27).ngClassValid,t.Cb(n,27).ngClassInvalid,t.Cb(n,27).ngClassPending),l(n,29,0,u.trackerSize),l(n,35,0,1,120,t.Cb(n,41).ngClassUntouched,t.Cb(n,41).ngClassTouched,t.Cb(n,41).ngClassPristine,t.Cb(n,41).ngClassDirty,t.Cb(n,41).ngClassValid,t.Cb(n,41).ngClassInvalid,t.Cb(n,41).ngClassPending),l(n,43,0,u.minSpeed),l(n,47,0,u.colorToTrack)})}function A(l){return t.Lb(0,[(l()(),t.sb(0,0,null,null,1,"div",[["class","page-title"]],null,null,null,null,null)),(l()(),t.Jb(-1,null,["Motion Tracking"])),(l()(),t.sb(2,0,null,null,13,"div",[["class","page-content"]],null,null,null,null,null)),(l()(),t.jb(16777216,null,null,1,null,v)),t.rb(4,16384,null,0,h.k,[t.R,t.O],{ngIf:[0,"ngIf"]},null),(l()(),t.sb(5,0,null,null,5,"div",[["class","panel"]],null,null,null,null,null)),(l()(),t.sb(6,0,null,null,4,"div",[["class","filter-buttons"]],null,null,null,null,null)),(l()(),t.jb(16777216,null,null,1,null,m)),t.rb(8,16384,null,0,h.k,[t.R,t.O],{ngIf:[0,"ngIf"]},null),(l()(),t.jb(16777216,null,null,1,null,C)),t.rb(10,16384,null,0,h.k,[t.R,t.O],{ngIf:[0,"ngIf"]},null),(l()(),t.sb(11,0,null,null,2,"div",[["class","sample-container panel"]],null,null,null,null,null)),(l()(),t.sb(12,0,null,null,1,"div",[["class","canvas-container"]],null,null,null,null,null)),(l()(),t.sb(13,0,null,null,0,"canvas",[["height","480"],["id","canvas"],["width","640"]],null,[[null,"click"]],function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.pickColor(u)&&t),t},null,null)),(l()(),t.jb(16777216,null,null,1,null,f)),t.rb(15,16384,null,0,h.k,[t.R,t.O],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,4,0,!u.streamToDisplay),l(n,8,0,!u.enabled),l(n,10,0,u.enabled),l(n,15,0,!!u.streamToDisplay)},null)}function k(l){return t.Lb(0,[(l()(),t.sb(0,0,null,null,1,"ng-component",[],null,null,null,A,p)),t.rb(1,114688,null,0,g,[d.a],null,null)],function(l,n){l(n,1,0)},null)}var S=t.ob("ng-component",g,k,{},{},[]),T=u("t/Na"),y=u("eDkP"),x=u("Fzqc"),I=u("M2Lx"),j=u("uGex"),w=u("o3x0"),M=u("jQLj"),D=u("Wf4p"),B=u("dWZg"),z=u("mVsa"),E=u("v9Dh"),G=u("ZYjt"),J=u("4c35"),P=u("qAlS"),O=u("seP3"),L=u("UodH"),_=u("lLAP"),F=u("/VYK"),R=u("b716"),Y=u("SMsm"),q=u("y4qS"),H=u("BHnd"),N=u("Blfk"),U=u("6Wmm"),V=u("La40"),X=u("vARd"),W=u("w+lc"),K=u("PCNd"),Z=u("ZYCi");u.d(n,"TrackingModuleNgFactory",function(){return Q});var Q=t.pb(e,[],function(l){return t.zb([t.Ab(512,t.j,t.eb,[[8,[a.a,i.b,i.a,s.a,o.a,o.b,r.a,S]],[3,t.j],t.z]),t.Ab(4608,h.m,h.l,[t.w,[2,h.v]]),t.Ab(4608,T.h,T.n,[h.d,t.D,T.l]),t.Ab(4608,T.o,T.o,[T.h,T.m]),t.Ab(5120,T.a,function(l){return[l]},[T.o]),t.Ab(4608,T.k,T.k,[]),t.Ab(6144,T.i,null,[T.k]),t.Ab(4608,T.g,T.g,[T.i]),t.Ab(6144,T.b,null,[T.g]),t.Ab(4608,T.f,T.j,[T.b,t.s]),t.Ab(4608,T.c,T.c,[T.f]),t.Ab(4608,b.n,b.n,[]),t.Ab(4608,y.a,y.a,[y.g,y.c,t.j,y.f,y.d,t.s,t.B,h.d,x.b,[2,h.g]]),t.Ab(5120,y.h,y.i,[y.a]),t.Ab(4608,I.c,I.c,[]),t.Ab(5120,j.a,j.b,[y.a]),t.Ab(5120,w.b,w.c,[y.a]),t.Ab(135680,w.d,w.d,[y.a,t.s,[2,h.g],[2,w.a],w.b,[3,w.d],y.c]),t.Ab(4608,M.h,M.h,[]),t.Ab(5120,M.a,M.b,[y.a]),t.Ab(4608,D.a,D.p,[[2,D.f],B.a]),t.Ab(4608,D.b,D.b,[]),t.Ab(5120,z.b,z.f,[y.a]),t.Ab(5120,E.a,E.b,[y.a]),t.Ab(4608,G.f,D.c,[[2,D.g],[2,D.j]]),t.Ab(1073742336,h.c,h.c,[]),t.Ab(1073742336,T.e,T.e,[]),t.Ab(1073742336,T.d,T.d,[]),t.Ab(1073742336,b.l,b.l,[]),t.Ab(1073742336,b.c,b.c,[]),t.Ab(1073742336,x.a,x.a,[]),t.Ab(1073742336,J.g,J.g,[]),t.Ab(1073742336,B.b,B.b,[]),t.Ab(1073742336,P.b,P.b,[]),t.Ab(1073742336,y.e,y.e,[]),t.Ab(1073742336,D.j,D.j,[[2,D.d],[2,G.g]]),t.Ab(1073742336,D.o,D.o,[]),t.Ab(1073742336,D.m,D.m,[]),t.Ab(1073742336,D.l,D.l,[]),t.Ab(1073742336,I.d,I.d,[]),t.Ab(1073742336,O.a,O.a,[]),t.Ab(1073742336,j.c,j.c,[]),t.Ab(1073742336,L.c,L.c,[]),t.Ab(1073742336,w.g,w.g,[]),t.Ab(1073742336,_.a,_.a,[]),t.Ab(1073742336,M.i,M.i,[]),t.Ab(1073742336,D.q,D.q,[]),t.Ab(1073742336,D.k,D.k,[]),t.Ab(1073742336,F.b,F.b,[]),t.Ab(1073742336,R.a,R.a,[]),t.Ab(1073742336,z.e,z.e,[]),t.Ab(1073742336,Y.c,Y.c,[]),t.Ab(1073742336,q.p,q.p,[]),t.Ab(1073742336,H.l,H.l,[]),t.Ab(1073742336,N.c,N.c,[]),t.Ab(1073742336,U.b,U.b,[]),t.Ab(1073742336,E.c,E.c,[]),t.Ab(1073742336,V.j,V.j,[]),t.Ab(1073742336,X.e,X.e,[]),t.Ab(1073742336,W.a,W.a,[]),t.Ab(1073742336,K.a,K.a,[]),t.Ab(1073742336,Z.n,Z.n,[[2,Z.t],[2,Z.k]]),t.Ab(1073742336,e,e,[]),t.Ab(256,T.l,"XSRF-TOKEN",[]),t.Ab(256,T.m,"X-XSRF-TOKEN",[]),t.Ab(256,D.e,D.h,[]),t.Ab(1024,Z.i,function(){return[[{path:"",component:g}]]},[])])})}}]);